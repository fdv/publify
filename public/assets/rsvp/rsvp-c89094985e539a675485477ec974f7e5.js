(function(){"use strict";function t(t,n){for(var r=0,e=t.length;e>r;r++)if(t[r]===n)return r;return-1}function n(t){var n=t._promiseCallbacks;return n||(n=t._promiseCallbacks={}),n}function r(t,n){return"onerror"===t?void L.on("error",n):2!==arguments.length?L[t]:void(L[t]=n)}function e(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function u(){}function s(){}function a(t){try{return t.then}catch(n){return un.error=n,un}}function c(t,n,r,e){try{t.call(n,r,e)}catch(o){return o}}function f(t,n,r){L.async(function(t){var e=!1,o=c(r,n,function(r){e||(e=!0,n!==r?p(t,r):v(t,r))},function(n){e||(e=!0,y(t,n))},"Settle: "+(t._label||" unknown promise"));!e&&o&&(e=!0,y(t,o))},t)}function l(t,n){n._state===en?v(t,n._result):t._state===on?y(t,n._result):d(n,void 0,function(r){n!==r?p(t,r):v(t,r)},function(n){y(t,n)})}function h(t,n){if(n.constructor===t.constructor)l(t,n);else{var r=a(n);r===un?y(t,un.error):void 0===r?v(t,n):o(r)?f(t,n,r):v(t,n)}}function p(t,n){t===n?v(t,n):e(n)?h(t,n):v(t,n)}function _(t){t._onerror&&t._onerror(t._result),m(t)}function v(t,n){t._state===rn&&(t._result=n,t._state=en,0===t._subscribers.length?L.instrument&&nn("fulfilled",t):L.async(m,t))}function y(t,n){t._state===rn&&(t._state=on,t._result=n,L.async(_,t))}function d(t,n,r,e){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=n,o[i+en]=r,o[i+on]=e,0===i&&t._state&&L.async(m,t)}function m(t){var n=t._subscribers,r=t._state;if(L.instrument&&nn(r===en?"fulfilled":"rejected",t),0!==n.length){for(var e,o,i=t._result,u=0;u<n.length;u+=3)e=n[u],o=n[u+r],e?b(r,e,o,i):o(i);t._subscribers.length=0}}function g(){this.error=null}function w(t,n){try{return t(n)}catch(r){return sn.error=r,sn}}function b(t,n,r,e){var i,u,s,a,c=o(r);if(c){if(i=w(r,e),i===sn?(a=!0,u=i.error,i=null):s=!0,n===i)return void y(n,new TypeError("A promises callback cannot return that same promise."))}else i=e,s=!0;n._state!==rn||(c&&s?p(n,i):a?y(n,u):t===en?v(n,i):t===on&&y(n,i))}function A(t,n){try{n(function(n){p(t,n)},function(n){y(t,n)})}catch(r){y(t,r)}}function E(t,n,r){return t===en?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function j(t,n,r,e){this._instanceConstructor=t,this.promise=new t(s,e),this._abortOnReject=r,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):y(this.promise,this._validationError())}function T(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function S(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function C(t,n){this._id=_n++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],L.instrument&&nn("created",this),s!==t&&(o(t)||T(),this instanceof C||S(),A(this,t))}function k(){this.value=void 0}function O(t){try{return t.then}catch(n){return yn.value=n,yn}}function R(t,n,r){try{t.apply(n,r)}catch(e){return yn.value=e,yn}}function M(t,n){for(var r,e,o={},i=t.length,u=new Array(i),s=0;i>s;s++)u[s]=t[s];for(e=0;e<n.length;e++)r=n[e],o[r]=u[e+1];return o}function I(t){for(var n=t.length,r=new Array(n-1),e=1;n>e;e++)r[e-1]=t[e];return r}function P(t,n){return{then:function(r,e){return t.call(n,r,e)}}}function N(t,n,r,e){var o=R(r,e,n);return o===yn&&y(t,o.value),t}function x(t,n,r,e){return vn.all(n).then(function(n){var o=R(r,e,n);return o===yn&&y(t,o.value),t})}function K(t){return t&&"object"==typeof t?t.constructor===vn?!0:O(t):!1}function Y(t,n,r){this._superConstructor(t,n,!1,r)}function D(t,n,r){this._superConstructor(t,n,!0,r)}function U(t,n,r){this._superConstructor(t,n,!1,r)}function F(){return function(){process.nextTick(q)}}function G(){var t=0,n=new xn(q),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function V(){var t=new MessageChannel;return t.port1.onmessage=q,function(){t.port2.postMessage(0)}}function W(){return function(){setTimeout(q,1)}}function q(){for(var t=0;In>t;t+=2){var n=Yn[t],r=Yn[t+1];n(r),Yn[t]=void 0,Yn[t+1]=void 0}In=0}function z(t,n){L.async(t,n)}function B(){L.on.apply(L,arguments)}function H(){L.off.apply(L,arguments)}var J={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(r,e){var o,i=n(this);o=i[r],o||(o=i[r]=[]),-1===t(o,e)&&o.push(e)},off:function(r,e){var o,i,u=n(this);return e?(o=u[r],i=t(o,e),void(-1!==i&&o.splice(i,1))):void(u[r]=[])},trigger:function(t,r){var e,o,i=n(this);if(e=i[t])for(var u=0;u<e.length;u++)(o=e[u])(r)}},L={instrument:!1};J.mixin(L);var Q;Q=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X=Q,Z=Date.now||function(){return(new Date).getTime()},$=Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return u.prototype=t,new u},tn=[],nn=function(t,n,r){1===tn.push({name:t,payload:{guid:n._guidKey+n._id,eventName:t,detail:n._result,childGuid:r&&n._guidKey+r._id,label:n._label,timeStamp:Z(),stack:new Error(n._label).stack}})&&setTimeout(function(){for(var t,n=0;n<tn.length;n++)t=tn[n],L.trigger(t.name,t.payload);tn.length=0},50)},rn=void 0,en=1,on=2,un=new g,sn=new g;j.prototype._validateInput=function(t){return X(t)},j.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},j.prototype._init=function(){this._result=new Array(this.length)};var an=j;j.prototype._enumerate=function(){for(var t=this.length,n=this.promise,r=this._input,e=0;n._state===rn&&t>e;e++)this._eachEntry(r[e],e)},j.prototype._eachEntry=function(t,n){var r=this._instanceConstructor;i(t)?t.constructor===r&&t._state!==rn?(t._onerror=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(r.resolve(t),n):(this._remaining--,this._result[n]=this._makeResult(en,n,t))},j.prototype._settledAt=function(t,n,r){var e=this.promise;e._state===rn&&(this._remaining--,this._abortOnReject&&t===on?y(e,r):this._result[n]=this._makeResult(t,n,r)),0===this._remaining&&v(e,this._result)},j.prototype._makeResult=function(t,n,r){return r},j.prototype._willSettleAt=function(t,n){var r=this;d(t,void 0,function(t){r._settledAt(en,n,t)},function(t){r._settledAt(on,n,t)})};var cn=function(t,n){return new an(this,t,!0,n).promise},fn=function(t,n){function r(t){p(i,t)}function e(t){y(i,t)}var o=this,i=new o(s,n);if(!X(t))return y(i,new TypeError("You must pass an array to race.")),i;for(var u=t.length,a=0;i._state===rn&&u>a;a++)d(o.resolve(t[a]),void 0,r,e);return i},ln=function(t,n){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var e=new r(s,n);return p(e,t),e},hn=function(t,n){var r=this,e=new r(s,n);return y(e,t),e},pn="rsvp_"+Z()+"-",_n=0,vn=C;C.cast=ln,C.all=cn,C.race=fn,C.resolve=ln,C.reject=hn,C.prototype={constructor:C,_guidKey:pn,_onerror:function(t){L.trigger("error",t)},then:function(t,n,r){var e=this,o=e._state;if(o===en&&!t||o===on&&!n)return L.instrument&&nn("chained",this,this),this;e._onerror=null;var i=new this.constructor(s,r),u=e._result;if(L.instrument&&nn("chained",e,i),o){var a=arguments[o-1];L.async(function(){b(o,i,a,u)})}else d(e,i,t,n);return i},"catch":function(t,n){return this.then(null,t,n)},"finally":function(t,n){var r=this.constructor;return this.then(function(n){return r.resolve(t()).then(function(){return n})},function(n){return r.resolve(t()).then(function(){throw n})},n)}};var yn=new k,dn=new k,mn=function(t,n){var r=function(){for(var r,e=this,o=arguments.length,i=new Array(o+1),u=!1,a=0;o>a;++a){if(r=arguments[a],!u){if(u=K(r),u===dn){var c=new vn(s);return y(c,dn.value),c}u&&u!==!0&&(r=P(u,r))}i[a]=r}var f=new vn(s);return i[o]=function(t,r){t?y(f,t):void 0===n?p(f,r):n===!0?p(f,I(arguments)):X(n)?p(f,M(arguments,n)):p(f,r)},u?x(f,i,t,e):N(f,i,t,e)};return r.__proto__=t,r},gn=function(t,n){return vn.all(t,n)};Y.prototype=$(an.prototype),Y.prototype._superConstructor=an,Y.prototype._makeResult=E,Y.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var wn=function(t,n){return new Y(vn,t,n).promise},bn=function(t,n){return vn.race(t,n)},An=D;D.prototype=$(an.prototype),D.prototype._superConstructor=an,D.prototype._init=function(){this._result={}},D.prototype._validateInput=function(t){return t&&"object"==typeof t},D.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},D.prototype._enumerate=function(){var t=this.promise,n=this._input,r=[];for(var e in n)t._state===rn&&n.hasOwnProperty(e)&&r.push({position:e,entry:n[e]});var o=r.length;this._remaining=o;for(var i,u=0;t._state===rn&&o>u;u++)i=r[u],this._eachEntry(i.entry,i.position)};var En=function(t,n){return new An(vn,t,n).promise};U.prototype=$(An.prototype),U.prototype._superConstructor=an,U.prototype._makeResult=E,U.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var jn,Tn=function(t,n){return new U(vn,t,n).promise},Sn=function(t){throw setTimeout(function(){throw t}),t},Cn=function(t){var n={};return n.promise=new vn(function(t,r){n.resolve=t,n.reject=r},t),n},kn=function(t,n,r){return vn.all(t,r).then(function(t){if(!o(n))throw new TypeError("You must pass a function as map's second argument.");for(var e=t.length,i=new Array(e),u=0;e>u;u++)i[u]=n(t[u]);return vn.all(i,r)})},On=function(t,n){return vn.resolve(t,n)},Rn=function(t,n){return vn.reject(t,n)},Mn=function(t,n,r){return vn.all(t,r).then(function(t){if(!o(n))throw new TypeError("You must pass a function as filter's second argument.");for(var e=t.length,i=new Array(e),u=0;e>u;u++)i[u]=n(t[u]);return vn.all(i,r).then(function(n){for(var r=new Array(e),o=0,i=0;e>i;i++)n[i]&&(r[o]=t[i],o++);return r.length=o,r})})},In=0,Pn=function(t,n){Yn[In]=t,Yn[In+1]=n,In+=2,2===In&&jn()},Nn="undefined"!=typeof window?window:{},xn=Nn.MutationObserver||Nn.WebKitMutationObserver,Kn="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Yn=new Array(1e3);jn="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?F():xn?G():Kn?V():W(),L.async=Pn;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var Dn=window.__PROMISE_INSTRUMENTATION__;r("instrument",!0);for(var Un in Dn)Dn.hasOwnProperty(Un)&&B(Un,Dn[Un])}var Fn={race:bn,Promise:vn,allSettled:wn,hash:En,hashSettled:Tn,denodeify:mn,on:B,off:H,map:kn,filter:Mn,resolve:On,reject:Rn,all:gn,rethrow:Sn,defer:Cn,EventTarget:J,configure:r,async:z};"function"==typeof define&&define.amd?define(function(){return Fn}):"undefined"!=typeof module&&module.exports?module.exports=Fn:"undefined"!=typeof this&&(this.RSVP=Fn)}).call(this);