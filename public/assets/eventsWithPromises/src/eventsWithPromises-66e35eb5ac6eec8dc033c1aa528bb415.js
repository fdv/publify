define(["rsvp"],function(t){var e={};return{subscribe:function(t,n,o){var r=!1;if(!t||"string"!=typeof t)throw"Event name not supplied to subscribe method";if(!n||"function"!=typeof n)throw"Callback not supplied to subscribe method";if(e[t]){for(var i=0,l=e[t].length;l>i;i++)if(e[t][i].callback===n){r=!0;break}}else e[t]=[];r||e[t].push({callback:n,context:o})},unsubscribe:function(t,n){if(!t||"string"!=typeof t)throw"Event name not supplied to unsubscribe method";if(!n||"object"!=typeof n)throw"Context not supplied to unsubscribe method";if(e[t])for(var o=0,r=e[t].length;r>o;o++)if(e[t][o].context===n){e[t].splice(o,1);break}},unsubscribeAll:function(){e={}},publish:function(n,o){var r,i,l=[],c=[];if(e[n]){r=e[n];for(var u=0,s=r.length;s>u;u++)c.push(t.defer()),l.push(c[u].promise);i=t.allSettled(l);for(var u=0,s=r.length;s>u;u++)r[u].context?r[u].callback.call(r[u].context,o,c[u]||null):r[u].callback(o,c[u]||null);return i}}}});