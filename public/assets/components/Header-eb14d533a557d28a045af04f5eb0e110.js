define(["jquery","DoughBaseComponent"],function(t,e){"use strict";var i,s={headerMoveTimeout:2e3,uiEvents:{"click [data-dough-collapsable-trigger]":"_filterButtonFired"}},a=function(e,i){return a.baseConstructor.call(this,e,i,s),this.$htmlAndBody=t("html,body"),this.$filter=this.$el.find("[data-dough-header-filter]"),this.$headerTop=this.$el.find("[data-dough-header-header-top]"),this.filterActiveClass=this.$el.data("dough-header-filter-active-class"),this.animateClass=this.$el.data("dough-header-animate-class"),this};return e.extend(a),i=a.prototype,i.init=function(t){return this._bindEvents(),this._positionFilterOffScreen(),this._addAnimateClass(),this._startDelayedHeaderMove(),this._initialisedSuccess(t),this},i._bindEvents=function(){t(window).resize(t.proxy(this._positionFilterOffScreen,this))},i._positionFilterOffScreen=function(){this.$filter.css("display","block"),this._removeAnimateClass(),this.$el.css("margin-top",-this._getFilterHeight()),this._addAnimateClass()},i._addAnimateClass=function(){setTimeout(t.proxy(function(){this.$el.addClass(this.animateClass)},this),0)},i._startDelayedHeaderMove=function(){setTimeout(t.proxy(this._moveHeader,this),this.config.headerMoveTimeout)},i._shouldMoveHeader=function(){var e=Math.max.apply(Math,this.$htmlAndBody.map(function(e,i){return t(i).scrollTop()}));return 0===e&&!this._isFilterActive()&&!this._isShallowHeader()},i._isShallowHeader=function(){return"shallow"===window.getComputedStyle(this.$el[0],":after").getPropertyValue("content")},i._moveHeader=function(){this._shouldMoveHeader()&&this.$htmlAndBody.animate({scrollTop:this.$headerTop.height()+1})},i._isFilterActive=function(){return this.$el.hasClass(this.filterActiveClass)},i._filterButtonFired=function(){this.$el.toggleClass(this.filterActiveClass),this._isFilterActive()||this._moveHeader()},i._getFilterHeight=function(){return this.$filter.height()},i._removeAnimateClass=function(){this.$el.removeClass(this.animateClass)},a});