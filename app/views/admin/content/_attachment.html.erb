<div id="attachment_<%= attachment_num -%>"<% if hidden %> style="display: none;"<% end %>>
  <%= file_field 'attachments', "filename_#{attachment_num}" -%>
  <%= link_to_function(_("Remove"),
      update_page do |page|
        page << "if (confirm(_('Really delete attachment') +' #{attachment_num}?')){"
        page.visual_effect(:toggle_appear, "attachment_#{attachment_num}", :afterFinish => "function(obj){Element.remove(obj.element);}")
        page << "}"
      end) -%>
</div>
<div id="attachment_add_<%= attachment_num.succ %>">
  <%= link_to_remote _('Add another attachment'),
    :url => { :action => "attachment_box_add", :id => attachment_num.succ },
    :asynchronus => false -%>
</div>

<% if @article and @article.id %>
<div id="resources" class="separator">
  <h4><%= _("Resources attached to this article")%></h4>
  <% if  @article.resources.count > 0 %>
    <ul>
    <% for resource in @article.resources %>
      <li><%= link_to_remote "- #{resource.upload_url}", :url => { :action => "resource_remove", :id => @article.id, :resource_id => resource.id}, :update => 'resources' %></li>
    <% end %>
    </ul>
  <% elsif %>
    <p><%= _("No resources are currently attached")%>.</p>
  <% end %>

  <% if @resources.count > 0 %>
    <h4><%= _("You can associate the following resources")%></h4>
    <ul>
    <% for resource in @resources - @article.resources %>
      <li><%= link_to_remote "+ #{resource.upload_url}", :url => { :action => "resource_add", :id => @article.id, :resource_id => resource.id}, :update => 'resources' %></li>
    <% end %>
    </ul>
  <% end %>
</div>
<% end %>
